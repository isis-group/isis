#!/usr/bin/make -f


include /usr/share/cdbs/1/rules/debhelper.mk

########################################
# CMAKE support
########################################

DEB_CMAKE_EXTRA_FLAGS = \
	-DCMAKE_C_COMPILER="/usr/bin/gcc" \
	-DBUILD_SHARED_LIBS:BOOL=ON \
	-DCMAKE_SKIP_RPATH:BOOL=OFF \
	-DCMAKE_BUILD_TYPE=release \
	-DISIS_DIR=/usr/share/isis/cmake \
	-DISIS_ADAPTER_ITK=ON \
	-DISIS_ADAPTER_QT4=OFF \
	-DISIS_ADAPTER_VTK=OFF

include /usr/share/cdbs/1/class/cmake.mk

# get number of parallel builds from the default environment
# variable DEB_BUILD_OPTIONS. The expected value is 'parrallel=#'.
ifneq (,$(filter parallel=%,$(DEB_BUILD_OPTIONS)))
	NUMJOBS = $(patsubst parallel=%,%,$(filter parallel=%,$(DEB_BUILD_OPTIONS)))
    MAKEFLAGS += -j$(NUMJOBS)
endif
